<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Banco Digital - Dashboard</title>
    <link rel="stylesheet" href="styles/styles.css">
</head>
<body>
    <div class="dashboard-container" role="main">
        <!-- Sidebar -->
        <nav class="sidebar" aria-label="Menú principal">
            <div class="sidebar-header">
                <h2 id="bank-title">Banco Digital</h2>
                <p id="user-name">Juan Pérez</p>
            </div>
            <ul class="sidebar-menu" role="menu">
                <li role="none"><a href="#" onclick="showSection('resumen')" class="menu-item active" role="menuitem" tabindex="0" aria-current="page">📊 Resumen de Cuenta</a></li>
                <li role="none"><a href="#" onclick="showSection('transacciones')" class="menu-item" role="menuitem" tabindex="0">📋 Resumen de Transacciones</a></li>
                <li role="none"><a href="#" onclick="showSection('consignacion')" class="menu-item" role="menuitem" tabindex="0">💰 Consignación Electrónica</a></li>
                <li role="none"><a href="#" onclick="showSection('retiro')" class="menu-item" role="menuitem" tabindex="0">💸 Retiro de Dinero</a></li>
                <li role="none"><a href="#" onclick="showSection('servicios')" class="menu-item" role="menuitem" tabindex="0">🧾 Pago de Servicios</a></li>
                <li role="none"><a href="#" onclick="showSection('extracto')" class="menu-item" role="menuitem" tabindex="0">📄 Extracto Bancario</a></li>
                <li role="none"><a href="#" onclick="showSection('certificado')" class="menu-item" role="menuitem" tabindex="0">🏆 Certificado Bancario</a></li>
                <li role="none"><a href="#" onclick="logout()" class="menu-item" role="menuitem" tabindex="0">🚪 Cerrar Sesión</a></li>
            </ul>
        </nav>

        <!-- Main Content -->
        <main class="main-content" tabindex="-1">
            <!-- Resumen de Cuenta -->
            <section id="resumen" class="content-section active" aria-labelledby="resumen-title" tabindex="0">
                <h1 id="resumen-title">Resumen de Cuenta</h1>
                <div class="account-summary">
                    <div class="summary-card" role="region" aria-labelledby="info-cuenta-title">
                        <h3 id="info-cuenta-title">Información de la Cuenta</h3>
                        <div class="account-info">
                            <div class="info-item">
                                <span class="label">Número de Cuenta</span>
                                <span class="value">1234567890</span>
                            </div>
                            <div class="info-item">
                                <span class="label">Saldo Actual</span>
                                <span class="value">$2,500,000</span>
                            </div>
                            <div class="info-item">
                                <span class="label">Fecha de Creación</span>
                                <span class="value">15/01/2024</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="danger-zone" style="margin-top: 50px; padding: 20px; border: 1px solid #fee2e2; background-color: #fef2f2; border-radius: 8px;">
                    <h3 style="color: #dc2626; margin-top: 0;">Zona de Peligro</h3>
                    <p>Una vez que elimines tu cuenta, no hay vuelta atrás. Por favor, asegúrate de que realmente quieres hacer esto.</p>
                    <button id="deleteAccountBtn" class="btn btn-danger" style="background-color: #dc2626; color: white;">
                        Eliminar mi Cuenta
                    </button>
                </div>
            </section>

            <!-- Resumen de Transacciones -->
            <section id="transacciones" class="content-section" aria-labelledby="transacciones-title" tabindex="0">
                <div class="section-header">
                    <h1 id="transacciones-title">Últimas 10 Transacciones</h1>
                </div>
                <div class="transactions-table" role="region" aria-label="Tabla de transacciones">
                    <table>
                        <thead>
                            <tr>
                                <th scope="col">Fecha</th>
                                <th scope="col">Referencia</th>
                                <th scope="col">Tipo</th>
                                <th scope="col">Concepto</th>
                                <th scope="col">Valor</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Las filas se llenan dinámicamente con JS -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Agregar botón centrado debajo de la tabla -->
                <div style="text-align: center; margin-top: 32px;">
                    <button id="printTransactionsBtn" class="btn btn-primary" aria-label="Imprimir Transacciones">Imprimir Transacciones</button>
                </div>
            </section>

            <!-- Consignación -->
            <section id="consignacion" class="content-section" aria-labelledby="consignacion-title" tabindex="0">
                <h1 id="consignacion-title">Consignación Electrónica</h1>
                <div class="transaction-form" role="form" aria-labelledby="consignacion-title">
                    <div class="account-info-box">
                        <p><strong>Número de Cuenta:</strong> 1234567890</p>
                        <p><strong>Titular:</strong> Juan Pérez</p>
                    </div>
                    
                    <form id="consignacionForm" autocomplete="off">
                        <div class="form-group">
                            <label for="valorConsignacion">Cantidad a Consignar</label>
                            <input type="number" id="valorConsignacion" min="1" step="0.01" required aria-required="true" aria-label="Cantidad a Consignar">
                        </div>
                        <div id="consignacionMessage" class="alert" style="display: none;" role="alert" aria-live="assertive"></div>
                        <button type="submit" class="btn btn-primary" aria-label="Realizar Consignación">Realizar Consignación</button>
                    </form>
                </div>
            </section>

            <!-- Retiro -->
            <section id="retiro" class="content-section" aria-labelledby="retiro-title" tabindex="0">
                <h1 id="retiro-title">Retiro de Dinero</h1>
                <div class="transaction-form" role="form" aria-labelledby="retiro-title">
                    <div class="account-info-box">
                        <p><strong>Número de Cuenta:</strong> 1234567890</p>
                        <p><strong>Titular:</strong> Juan Pérez</p>
                        <p><strong>Saldo Disponible:</strong> $2,500,000</p>
                    </div>
                    
                    <form id="retiroForm" autocomplete="off">
                        <div class="form-group">
                            <label for="valorRetiro">Cantidad a Retirar</label>
                            <input type="number" id="valorRetiro" min="1" step="0.01" required aria-required="true" aria-label="Cantidad a Retirar">
                        </div>
                        <div id="retiroMessage" class="alert" style="display: none;" role="alert" aria-live="assertive"></div>
                        <button type="submit" class="btn btn-primary" aria-label="Realizar Retiro">Realizar Retiro</button>
                    </form>
                </div>
            </section>

            <!-- Pago de Servicios -->
            <section id="servicios" class="content-section" aria-labelledby="servicios-title" tabindex="0">
                <h1 id="servicios-title">Pago de Servicios Públicos</h1>
                <div class="transaction-form" role="form" aria-labelledby="servicios-title">
                    <div class="account-info-box">
                        <p><strong>Número de Cuenta:</strong> 1234567890</p>
                        <p><strong>Titular:</strong> Juan Pérez</p>
                        <p><strong>Saldo Disponible:</strong> $2,500,000</p>
                    </div>
                    
                    <form id="serviciosForm" autocomplete="off">
                        <div class="form-group">
                            <label for="servicio">Servicio Público</label>
                            <select id="servicio" required aria-required="true" aria-label="Servicio Público">
                                <option value="">Seleccione el servicio</option>
                                <option value="Energía">Energía</option>
                                <option value="Agua">Agua</option>
                                <option value="Gas Natural">Gas Natural</option>
                                <option value="Internet">Internet</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="referencia">Referencia de Pago</label>
                            <input type="text" id="referencia" required aria-required="true" aria-label="Referencia de Pago">
                        </div>
                        <div class="form-group">
                            <label for="valorServicio">Valor a Pagar</label>
                            <input type="number" id="valorServicio" min="1" step="0.01" required aria-required="true" aria-label="Valor a Pagar">
                        </div>
                        <div id="serviciosMessage" class="alert" style="display: none;" role="alert" aria-live="assertive"></div>
                        <button type="submit" class="btn btn-primary" aria-label="Realizar Pago">Realizar Pago</button>
                    </form>
                </div>
            </section>

            <!-- Extracto Bancario -->
            <section id="extracto" class="content-section" aria-labelledby="extracto-title" tabindex="0">
                <h1 id="extracto-title">Extracto Bancario</h1>
                <div class="extract-form" role="region" aria-label="Formulario de extracto bancario">
                    <div class="account-info-box">
                        <p><strong>Número de Cuenta:</strong> <span id="extracto-numero-cuenta"></span></p>
                        <p><strong>Titular:</strong> <span id="extracto-titular"></span></p>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="año">Año</label>
                            <select id="año" aria-label="Año"></select>
                        </div>
                        <div class="form-group">
                            <label for="mes">Mes</label>
                            <select id="mes" aria-label="Mes"></select>
                        </div>
                    </div>
                    
                    <div class="transactions-table" role="region" aria-label="Tabla de extracto bancario">
                        <table>
                            <thead>
                                <tr>
                                    <th scope="col">Fecha</th>
                                    <th scope="col">Referencia</th>
                                    <th scope="col">Tipo</th>
                                    <th scope="col">Concepto</th>
                                    <th scope="col">Valor</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Las filas se llenan dinámicamente con JS -->
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Botón reposicionado y centrado -->
                    <div style="text-align: center; margin-top: 32px;">
                        <button id="printExtractBtn" class="btn btn-primary" aria-label="Imprimir Extracto">Imprimir Extracto</button>
                    </div>
                </div>
            </section>

            <!-- Certificado Bancario -->
            <section id="certificado" class="content-section" aria-labelledby="certificado-title" tabindex="0">
                <div class="section-header">
                    <h1 id="certificado-title">Certificado Bancario</h1>
                </div>
                <div class="certificate" role="region" aria-label="Certificado bancario">
                    <div class="certificate-header">
                        <h2>BANCO DIGITAL</h2>
                        <p>CERTIFICADO BANCARIO</p>
                    </div>
                    <div class="certificate-content">
                        <p>
        <strong>EL BANCO DIGITAL</strong> certifica que el(la) señor(a)
        <strong><span id="certificado-nombre"></span></strong>,
        identificado(a) con <span id="certificado-tipo-id"></span> número
        <strong><span id="certificado-numero-id"></span></strong>,
        es titular de la cuenta de ahorros número
        <strong><span id="certificado-numero-cuenta"></span></strong>.
    </p>
    <p>
        La mencionada cuenta fue abierta el
        <strong><span id="certificado-fecha-creacion"></span></strong>
        y se encuentra <strong>ACTIVA</strong> a la fecha de expedición del presente certificado.
    </p>
    <p>
        Este certificado se expide a solicitud del interesado para los fines que estime convenientes.
    </p>
                        <div class="certificate-footer">
                            <p><strong>Fecha de expedición:</strong> <span id="fechaActual"></span></p>
                            <div class="signature">
                                <div class="signature-line"></div>
                                <p><strong>BANCO DIGITAL</strong></p>
                                <p>Gerencia General</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Agregar botón centrado al final del certificado -->
                <div style="text-align: center; margin-top: 32px;">
                    <button id="printCertificateBtn" class="btn btn-primary" aria-label="Imprimir Certificado">Imprimir Certificado</button>
                </div>
            </section>
        </main>
    </div>
    <script src="js/dashboard.js"></script>
    <script src="js/database-manager.js"></script>

    <!-- Modal para confirmación de eliminación de cuenta -->
    <div id="deleteAccountModal" class="modal-overlay" style="display:none;" role="dialog" aria-modal="true" aria-labelledby="modalTitle" tabindex="-1">
        <div class="modal-content" role="document">
            <h2 id="modalTitle" style="margin-bottom: 16px;">¿Eliminar cuenta?</h2>
            <p style="margin-bottom: 24px;">Esta acción <strong>no se puede deshacer</strong> y eliminará todas tus transacciones.<br>¿Deseas continuar?</p>
            <div style="display: flex; gap: 16px; justify-content: flex-end;">
                <button id="cancelDeleteBtn" class="btn btn-secondary" type="button">Cancelar</button>
                <button id="confirmDeleteBtn" class="btn btn-danger" type="button" style="background: #dc2626;">Eliminar</button>
            </div>
        </div>
    </div>

    <!-- Modal para confirmación de cierre de sesión -->
    <div id="logoutModal" class="modal-overlay" style="display:none;" role="dialog" aria-modal="true" aria-labelledby="logoutModalTitle" tabindex="-1">
        <div class="modal-content" role="document">
            <h2 id="logoutModalTitle" style="margin-bottom: 16px;">¿Cerrar sesión?</h2>
            <p style="margin-bottom: 24px;">¿Estás seguro de que deseas cerrar sesión?</p>
            <div style="display: flex; gap: 16px; justify-content: flex-end;">
                <button id="cancelLogoutBtn" class="btn btn-secondary" type="button">Cancelar</button>
                <button id="confirmLogoutBtn" class="btn btn-danger" onclick="logout()">Confirmar</button>
            </div>
        </div>
    </div>
</body>
</html>